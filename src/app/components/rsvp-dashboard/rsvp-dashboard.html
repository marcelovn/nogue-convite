<div class="dashboard-container animate-fade-in">
  <!-- SeÃ§Ã£o de Perfil -->
  <section class="profile-section">
    <div class="profile-card card-base">
      <div class="profile-header">
        <div class="profile-avatar">ğŸ‘¤</div>
        <div class="profile-info">
          <h2>OlÃ¡, {{ getUserName() }}!</h2>
          <p>{{ authService.currentUser()?.email }}</p>
        </div>
      </div>
      <div class="profile-stats">
        <div class="stat-item">
          <span class="stat-value">{{ cards().length }}</span>
          <span class="stat-label">CartÃµes Criados</span>
        </div>
        <div class="stat-item">
          <span class="stat-value">{{ getTotalResponses() }}</span>
          <span class="stat-label">Respostas Totais</span>
        </div>
        <div class="stat-item">
          <span class="stat-value">{{ getTotalAcceptanceRate() }}%</span>
          <span class="stat-label">Taxa de AceitaÃ§Ã£o</span>
        </div>
      </div>
      <button class="btn btn-danger" (click)="logout()">ğŸšª Sair</button>
    </div>
  </section>

  <!-- SeÃ§Ã£o de CartÃµes -->
  <header class="dashboard-header">
    <div>
      <h1>ğŸ“Š Meus Convites IrrecusÃ¡veis</h1>
      <p>Acompanhe quem nÃ£o consegue dizer nÃ£o ğŸ˜„</p>
    </div>
    <button class="btn btn-primary" (click)="createNew()">â• Novo Convite</button>
  </header>

  @if (cards().length === 0) {
    <div class="empty-state card-base">
      <span class="empty-icon">ğŸ“«</span>
      <h2>Nenhum convite criado ainda</h2>
      <p>Crie seu primeiro convite interativo!</p>
      <button class="btn btn-primary" (click)="createNew()">Criar Convite</button>
    </div>
  } @else {
    <div class="cards-grid">
      @for (card of cards(); track card.id) {
        @let stats = getStats(card.id!);
        <div class="dashboard-card card-base">
          <div class="card-header">
            <h3>{{ card.title }}</h3>
            <span class="card-date">
              {{ card.createdAt ? 'Criado em ' + (card.createdAt | date:'dd/MM/yyyy') : '' }}
            </span>
          </div>

          <div class="card-info">
            <p><strong>Enviado por:</strong> {{ card.senderName }}</p>
          </div>

          <div class="stats-bar">
            <div class="stat">
              <span class="stat-number stat-yes">{{ stats.yes }}</span>
              <span class="stat-label">Sim</span>
            </div>
            <div class="stat">
              <span class="stat-number stat-no">{{ stats.no }}</span>
              <span class="stat-label">NÃ£o</span>
            </div>
            <div class="stat">
              <span class="stat-number">{{ stats.total }}</span>
              <span class="stat-label">Total</span>
            </div>
            <div class="stat">
              <span class="stat-number stat-percent">{{ stats.percentageYes }}%</span>
              <span class="stat-label">AceitaÃ§Ã£o</span>
            </div>
          </div>

          @if (stats.total > 0) {
            <div class="progress-bar">
              <div class="progress-fill" [style.width.%]="stats.percentageYes"></div>
            </div>
          }

          <div class="card-actions">
            <button class="btn btn-ghost" (click)="viewCard(card.id!)">ğŸ‘ Ver</button>
            <button class="btn btn-ghost btn-whatsapp-sm" (click)="shareWhatsApp(card)">ğŸ“² WhatsApp</button>
            <button class="btn btn-ghost" (click)="copyLink(card.id!)">
              {{ linkCopied() === card.id ? 'âœ“ Copiado!' : 'ğŸ“ Link' }}
            </button>
            <button class="btn btn-ghost btn-danger" (click)="deleteCard(card.id!)">ğŸ—‘ Excluir</button>
          </div>
        </div>
      }
    </div>
  }
</div>

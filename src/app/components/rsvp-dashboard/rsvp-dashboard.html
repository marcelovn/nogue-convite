<div class="dashboard-container animate-fade-in">
  <header class="dashboard-header">
    <div>
      <h1>ğŸ“Š Painel de Convites</h1>
      <p>Acompanhe as confirmaÃ§Ãµes de presenÃ§a em tempo real</p>
    </div>
    <button class="btn btn-primary" (click)="createNew()">â• Novo Convite</button>
  </header>

  @if (cards().length === 0) {
    <div class="empty-state card-base">
      <span class="empty-icon">ğŸ“«</span>
      <h2>Nenhum convite criado ainda</h2>
      <p>Crie seu primeiro convite interativo!</p>
      <button class="btn btn-primary" (click)="createNew()">Criar Convite</button>
    </div>
  } @else {
    <div class="cards-grid">
      @for (card of cards(); track card.id) {
        @let stats = getStats(card.id!);
        <div class="dashboard-card card-base">
          <div class="card-header">
            <h3>{{ card.title }}</h3>
            <span class="card-date">
              {{ card.createdAt ? 'Criado em ' + (card.createdAt | date:'dd/MM/yyyy') : '' }}
            </span>
          </div>

          <div class="card-info">
            <p><strong>Para:</strong> {{ card.recipientName }}</p>
            <p><strong>De:</strong> {{ card.senderName }}</p>
          </div>

          <div class="stats-bar">
            <div class="stat">
              <span class="stat-number stat-yes">{{ stats.yes }}</span>
              <span class="stat-label">Sim</span>
            </div>
            <div class="stat">
              <span class="stat-number stat-no">{{ stats.no }}</span>
              <span class="stat-label">NÃ£o</span>
            </div>
            <div class="stat">
              <span class="stat-number">{{ stats.total }}</span>
              <span class="stat-label">Total</span>
            </div>
            <div class="stat">
              <span class="stat-number stat-percent">{{ stats.percentageYes }}%</span>
              <span class="stat-label">AceitaÃ§Ã£o</span>
            </div>
          </div>

          @if (stats.total > 0) {
            <div class="progress-bar">
              <div class="progress-fill" [style.width.%]="stats.percentageYes"></div>
            </div>
          }

          <div class="card-actions">
            <button class="btn btn-ghost" (click)="viewCard(card.id!)">ğŸ‘ Ver</button>
            <button class="btn btn-ghost btn-whatsapp-sm" (click)="shareWhatsApp(card)">ğŸ“² WhatsApp</button>
            <button class="btn btn-ghost" (click)="copyLink(card.id!)">ğŸ“ Link</button>
            <button class="btn btn-ghost btn-danger" (click)="deleteCard(card.id!)">ğŸ—‘ Excluir</button>
          </div>
        </div>
      }
    </div>
  }
</div>
